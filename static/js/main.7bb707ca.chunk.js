(this.webpackJsonptasks=this.webpackJsonptasks||[]).push([[0],{79:function(e,t,a){e.exports=a(90)},84:function(e,t,a){},90:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),l=a.n(c),o=(a(84),a(47)),i=a(11),s=a(130),u=a(145),m=a(143),d=a(26),g=a(131),h=a(132),p=a(133),f=a(46),b=a(146),k=a(127),E=a(134),v=a(119),y=a(123);function w(e){var t=e.primary,a=e.to,n=r.a.useMemo((function(){return r.a.forwardRef((function(e,t){return r.a.createElement(o.b,Object.assign({to:a,ref:t},e))}))}),[a]);return r.a.createElement("li",null,r.a.createElement(v.a,{button:!0,component:n},r.a.createElement(y.a,{primary:t})))}var C=a(27),j=a(35),O=a(23),T=a(28),N=a(30),D=a(124),S=a(125),x=a(126),A=a(144),F=a(128),U=a(129),_=function(e){Object(N.a)(a,e);var t=Object(T.a)(a);function a(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(C.a)(this,a),(e=t.call(this,n)).categories=[],e.state=void 0,e.state={categories:e.categories,showcategdialog:!1,newcategtext:""},e.openNewCategDialog=e.openNewCategDialog.bind(Object(O.a)(e)),e.closeNewCategDialog=e.closeNewCategDialog.bind(Object(O.a)(e)),e.addCategory=e.addCategory.bind(Object(O.a)(e)),Y.table("tasks").each((function(t){e.categories.includes(t.category)||e.categories.push(t.category)})).then((function(){return e.setState({categories:e.categories})})),e}return Object(j.a)(a,[{key:"componentDidMount",value:function(){}},{key:"openNewCategDialog",value:function(){this.setState((function(e){return{showcategdialog:!0}}))}},{key:"closeNewCategDialog",value:function(){this.setState((function(e){return{showcategdialog:!1}}))}},{key:"handleNewCategChange",value:function(e){this.setState({newcategtext:e.target.value})}},{key:"addCategory",value:function(){var e=this;this.categories.push(this.state.newcategtext),this.setState((function(t){return{categories:e.categories,newcategtext:"",showcategdialog:!1}}))}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,this.categories.map((function(e,t){return r.a.createElement(w,{key:t,primary:e,to:"/c/".concat(e)})})),r.a.createElement(v.a,{button:!0,onClick:this.openNewCategDialog},r.a.createElement(y.a,null,"Add category")),r.a.createElement(D.a,{open:this.state.showcategdialog,onClose:this.closeNewCategDialog},r.a.createElement(S.a,null,"Add a category"),r.a.createElement(x.a,null,r.a.createElement(A.a,{placeholder:"Category name",value:this.state.newcategtext,onChange:this.handleNewCategChange.bind(this)})),r.a.createElement(F.a,null,r.a.createElement(U.a,{color:"primary",onClick:this.addCategory},"Add"),r.a.createElement(U.a,{color:"secondary",onClick:this.closeNewCategDialog.bind(this)},"Cancel"))))}}]),a}(r.a.Component),B=Object(s.a)((function(e){return Object(u.a)({menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},drawerList:{width:"200px"}})}));function M(){var e=B(),t=r.a.useState(!1),a=Object(d.a)(t,2),c=a[0],l=a[1],o=function(){return function(e){l(!c)}};return r.a.createElement(n.Fragment,null,r.a.createElement(g.a,{position:"static"},r.a.createElement(h.a,null,r.a.createElement(p.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",onClick:o()},r.a.createElement(E.a,null)),r.a.createElement(f.a,{variant:"h6",className:e.title},"To-do"))),r.a.createElement(b.a,{anchor:"left",open:c,onClose:o()},r.a.createElement(k.a,{className:e.drawerList},r.a.createElement(w,{primary:"Inicio",to:"/"}),r.a.createElement(_,null))))}var W=a(135),G=a(91),I=a(137),J=a(136),L=Object(s.a)((function(e){return Object(u.a)({floatbtn:{position:"absolute",top:"90%",left:"85%"},modalbtn:{width:"50%"}})}));function R(e){var t=L(),a=Object(n.useState)(!1),c=Object(d.a)(a,2),l=c[0],o=c[1],i=Object(n.useState)(""),s=Object(d.a)(i,2),u=s[0],m=s[1],g=Object(n.useState)(!1),h=Object(d.a)(g,2),p=h[0],f=h[1];return r.a.createElement(n.Fragment,null,r.a.createElement(W.a,{className:t.floatbtn,onClick:function(){o(!0)},color:"primary","aria-label":"add"},r.a.createElement(J.a,null)),r.a.createElement(D.a,{open:l,"aria-labelledby":"form-dialog-title"},r.a.createElement(S.a,{id:"form-dialog-title"},"Add a task"),r.a.createElement(x.a,null,r.a.createElement(A.a,{placeholder:"Task name",value:u,onChange:function(e){m(e.target.value)}})),r.a.createElement(F.a,null,r.a.createElement(U.a,{className:t.modalbtn,color:"primary",onClick:function(){f(!0),o(!1);var t=window.location.pathname.replace("/c/","");Y.table("tasks").add({name:u,completed:!1,category:t,created_at:new Date,updated_at:new Date}).then((function(t){e.updateTasks(),m(""),f(!1)}))}},"Add"),r.a.createElement(U.a,{className:t.modalbtn,color:"secondary",onClick:function(){o(!1)}},"Close"))),r.a.createElement(G.a,{open:p},r.a.createElement(I.a,{color:"inherit"})))}var z=a(138),H=a(141),$=a(139),q=a(140),K=a(142);function P(e){var t=Object(n.useState)(e.completed),a=Object(d.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(!1),i=Object(d.a)(o,2),s=i[0],u=i[1];return r.a.createElement(v.a,{button:!0},r.a.createElement(z.a,{onClick:function(){Y.table("tasks").update(e.id,{updated_at:new Date,completed:!c}).then((function(){l(!c)}))}},c?r.a.createElement($.a,null):r.a.createElement(q.a,null)),r.a.createElement(y.a,{primary:e.name,secondary:e.category}),r.a.createElement(H.a,null,r.a.createElement(p.a,{onClick:function(){u(!0),Y.table("tasks").delete(e.id).then((function(){return e.updateTasks()})).then((function(){return u(!1)}))},edge:"end","aria-label":"delete"},s?r.a.createElement(I.a,{size:"1rem"}):r.a.createElement(K.a,null))))}var Q=function(e){Object(N.a)(a,e);var t=Object(T.a)(a);function a(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(C.a)(this,a),(e=t.call(this,n)).updateTasks=e.updateTasks.bind(Object(O.a)(e)),e.state={tasks:[],category:window.location.pathname.replace("/c/",""),mounted:!1,lastUrl:""},e}return Object(j.a)(a,[{key:"componentDidMount",value:function(){this.setState({mounted:!0,lastUrl:this.urlCateg}),this.updateTasks()}},{key:"componentWillUnmount",value:function(){this.setState({mounted:!1})}},{key:"componentDidUpdate",value:function(){this.state.lastUrl!==this.urlCateg&&this.updateTasks()}},{key:"updateTasks",value:function(){var e=this,t=this.urlCateg;Y.table("tasks").where({category:"".concat(t)}).toArray().then((function(t){return e.setState({tasks:t,lastUrl:e.urlCateg})}))}},{key:"render",value:function(){var e=this;return r.a.createElement(n.Fragment,null,r.a.createElement("h1",null,"Tasks - ",this.urlCateg),r.a.createElement(k.a,null,this.state.tasks.map((function(t){return r.a.createElement(P,{key:t.id,name:t.name,completed:t.completed,id:t.id,updateTasks:e.updateTasks})}))),r.a.createElement(R,{updateTasks:this.updateTasks}))}},{key:"urlCateg",get:function(){return window.location.pathname.replace("/c/","")}}]),a}(r.a.Component),V=function(e){Object(N.a)(a,e);var t=Object(T.a)(a);function a(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(C.a)(this,a),(e=t.call(this,n)).state={tasks:[]},e.updateTasks=e.updateTasks.bind(Object(O.a)(e)),e}return Object(j.a)(a,[{key:"componentDidMount",value:function(){this.updateTasks()}},{key:"updateTasks",value:function(){var e=this;Y.table("tasks").orderBy("updated_at").toArray().then((function(t){return e.setState({tasks:t})}))}},{key:"render",value:function(){var e=this;return r.a.createElement(n.Fragment,null,r.a.createElement(k.a,null,this.state.tasks.map((function(t,a){return r.a.createElement(P,{key:a,name:t.name,completed:t.completed,id:t.id||0,updateTasks:e.updateTasks,category:t.category})}))))}}]),a}(r.a.Component);function X(){return r.a.createElement(n.Fragment,null,r.a.createElement("h1",null,"Home"),r.a.createElement(V,null))}var Y=new(function(e){Object(N.a)(a,e);var t=Object(T.a)(a);function a(){var e;return Object(C.a)(this,a),(e=t.call(this,"Database")).tasks=void 0,e.version(3).stores({tasks:"++id, name, completed, category, created_at, updated_at"}),e.tasks=e.table("tasks"),e}return a}(a(67).a)),Z=Object(s.a)((function(e){return Object(u.a)({root:{flexGrow:1}})}));function ee(){var e=Z();return r.a.createElement(o.a,null,r.a.createElement("div",{className:e.root},r.a.createElement(M,null),r.a.createElement(m.a,{maxWidth:"sm"},r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/c/:id",component:Q}),r.a.createElement(i.a,{path:"/",component:X})))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(ee,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[79,1,2]]]);
//# sourceMappingURL=main.7bb707ca.chunk.js.map